package
{
	import starling.display.Sprite;
	import starling.events.EnterFrameEvent;
	import starling.events.Event;
	import starling.events.KeyboardEvent;
	
	public class Game extends Sprite
	{
		private var player:Prueba;
		private var floor:Suelo;
		private var salta:Boolean = false;
		private var salto:Number;
		
		public function Game()
		{
			this.addEventListener(starling.events.Event.ADDED_TO_STAGE, onAddedToStage);
			this.addEventListener(EnterFrameEvent.ENTER_FRAME, update);
			this.addEventListener(KeyboardEvent.KEY_DOWN, pressKey);
		}
		
		private function onAddedToStage(e:Event):void
		{
			player = new Prueba();
			this.addChild(player);
			player.initialize();
			
			floor = new Suelo();
			this.addChild(floor);
		}
		
		private function pressKey(e:KeyboardEvent):void 
		{
			trace(e.keyCode);
			if (e.keyCode == 32)
			{
				salto = player.y - 150;
				salta = true;
			}
		}
		
		private function update(e:Event):void 
		{
			if (!(player.bounds.intersects(floor.bounds)) && !salta)
			{
				player.y += 5;
			}
			
			if (salta)
			{
				if (player.y > salto) 
				{
					player.y -= 6;
				}
				else
					salta = false;
			}
			
		}
	}
}
